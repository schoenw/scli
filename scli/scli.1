.\"                              hey, Emacs:   -*- nroff -*-
.\" stop is free software; you can redistribute it and/or modify
.\" it under the terms of the GNU General Public License as published by
.\" the Free Software Foundation; either version 2 of the License, or
.\" (at your option) any later version.
.\"
.\" This program is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public License
.\" along with this program; see the file COPYING.  If not, write to
.\" the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.
.\"
.TH SCLI 1 "August 26, 2001"
.\" Please update the above date whenever this man page is modified.
.\"
.\" Some roff macros, for reference:
.\" .nh        disable hyphenation
.\" .hy        enable hyphenation
.\" .ad l      left justify
.\" .ad b      justify to both left and right margins (default)
.\" .nf        disable filling
.\" .fi        enable filling
.\" .br        insert line break
.\" .sp <n>    insert n+1 empty lines
.\" for manpage-specific macros, see man(7)
.SH NAME
scli \- SNMP Command Line Interface
.SH SYNOPSIS
.B scli
.RI [ options ]
.I [hostname]
.RI [ community ]
.SH DESCRIPTION
\fBscli\fP provides a simple command line interface on top of the
Simple Network Management Protocol (SNMP). It can be used to read
data from devices and to configure them with simple commands. It
relies on the capabilities of the devices and thus not all commands
may work with all devices.
.PP
The optional \fIhostname\fR argument is the name or the IP address of
the remote host. \fBscli\fP talks to this host's SNMP agent on the
default port number 161 using the SNMP over UDP transport mapping.
.PP
The optional \fIcommunity\fR argument is the community string used to
communicate with the remote SNMP agent. The default string is
\fIpublic\fR. Please check the configuration of the SNMP agent to get
a clue about the community string to use, if the default community
string does not work.
.PP
.SH OPTIONS
\fBscli\fP accepts the following options:
.TP
.B \-V, \-\-version
Show version of program.
.TP
.B \-c, \-\-command
Process the given commands and exit.
.TP
.B \-d seconds, \-\-delay=seconds
Set delay between screen updates in seconds. The default delay between
updates is 5 seconds.
.TP
.B \-f, \-\-file
Process commands from a file and exit.
.TP
.B \-h, \-\-help
Show summary of scli options.
.TP
.B \-n, \-\-norc
Do not evaluate ~/.sclirc on startup.
.TP
.B \-p number, \-\-port=number
Set the SNMP port number. The default port number is 161.
.TP
.B \-r count, \-\-retries=count
The number of SNMP retransmissions before we give up. The default
number of retries is 5.
.TP
.B \-t msec, \-\-timeout=msec
The initial timeout in milli-seconds before an SNMP request is
transmitted. The default initial timeout interval is 200 milli-seconds.
.TP
.B \-x, \-\-xml
Generate XML output instead of the default output which is optimized
for humans and more difficult to parse by programs.
.SH COMMAND OVERVIEW
\fBscli\fP is a simple command interpreter. \fBscli\fP commands are
organized in a hierarchy. This section only describes the top-level
commands. Invoke the \fIhelp\fP command described below to get a
complete list of all commands supported by \fBscli\fP.
.TP 10
.I open
Establish an association to a remote SNMP agent.
.TP
.I close
Close the association to a remote SNMP agent.
.TP
.I exit
Exit the \fBscli\fP command interpreter.
.TP
.I help
Display help information about the \fBscli\fP command interpreter
including a full list of the \fBscli\fP command hierarchy.
.TP
.I history
Show the history of the last \fBscli\fP commands.
.TP
.I create
Create new object instances on the remote SNMP agent. This command
has many sub-commands which are used to instantiate very different
things.
.TP
.I delete
Delete object instances from the remote SNMP agent. This command
has many sub-commands which are used to delete very different
things.
.TP
.I set
Modify object instances on the remote SNMP agent by assigning new
values. This command has many sub-commands which are used to set
very different things.
.TP
.I show
Show information provided by the remote SNMP agent. This command has
many sub-commands focusing on various aspects of the system.
.TP
.I monitor
Monitor information provided by the remote SNMP agent. This command
has many sub-commands focusing on various aspects of the system.
\fBscli\fP monitors provide a live display of network and device
activities. Information is shown in a compact human readable format
and updated in regular intervals. The initial update interval length
is determined by the delay command line option.
.PP
\fBscli\fP supports recursive command evaluation. When a command is
entered which is not a leaf of the command tree, then the interpreter
will recursively invoke all commands in the subtree identified by the
entered command. In particular, entering \fIshow\fR will cause
\fBscli\fP to retrieve and display all information accessible from the
remote SNMP agent.
.SH INTERFACE MODE
The interface mode is based on the IF-MIB as published in RFC 2863 and
provides the following commands:
.TP
.B show interface info [<regexp>]
.TP
.B show interface details [<regexp>]
.TP
.B show interface stats [<regexp>]
.TP
.B show interface stack
.TP
.B set interface status <regexp> <value>
.TP
.B monitor interface stats [<regexp>]
.P
The \fBshow interface info\fP command shows summary information about
all selected interfaces. The optional regular expression <regexp> is
matched against the interface descriptions to select the interfaces of
interest.  The command generates a table which displays the interface
number, its status (administrative status, operational status,
connector present, promiscuous mode), the maximum transfer unit (MTU)
of the interface, the interface type and speed, the interface's local
name and its description.
.P
The \fBshow interface details\fP command describes the selected
interfaces in more detail. The optional regular expression <regexp> is
matched against the interface descriptions to select the interfaces of
interest. <tbd>
.P
The \fBshow interface stats\fP command <tbd>
.P
The \fBshow interface stack\fP command shows the stacking order of the
interfaces. <tbd>
.P
THe \fBset interface status <regexp> <value>\fP command modifies the
administrative status of all selected interfaces. The optional regular
expression <regexp> is matched against the interface descriptions to
select the interfaces of interest. The <value> parameter must be one
of the strings "up", "down" or "testing".

.SH NORTEL MODE
The nortel mode allows to manipulate virtual lans (vlans) on nortel
bridges. It is based on the RAPIDCITY-VLAN-MIB which is implemented at
least on the baystack bridges.
.TP
.B create nortel bridge vlan <vlanid> <name>
.TP
.B delete nortel bridge vlan <regexp>
.TP
.B set nortel bridge vlan ports <regexp> <ports>
.TP
.B show nortel bridge vlan info [<regexp>]
.TP
.B show nortel bridge vlan details [<regexp>]
.P
The \fBcreate nortel bridge vlan\fP command is used to create a new
vlan with the given vlanid and name.
.P
The \fBdelete nortel bridge vlan\fP command deletes all selected
vlans.  The regular expression <regexp> is matched against the vlan
names to select the vlans that should be deleted.
.P
The \fBset nortel bridge vlan ports\fP command allows to assign ports
to port-based vlans. The regular expression <regexp> is matched
against the vlan names to select the vlans that should be
modified. The <ports> argument contains a comma separated list of port
numbers or port number ranges, e.g. 1,5,7-8.
.P
The \fBshow nortel bridge vlan info\fP command shows summary
information about all selected vlans.  The optional regular expression
<regexp> is matched against the vlan names to select the vlans of
interest. The command generates a table which displays the vlan
number, the vlan name, the vlan type, the assigned vlan color, the
vlan priority, whether routing is enabled and the status of the vlan.
.P
The \fBshow nortel bridge vlan details\fP command describes the
selected vlans in more detail. The optional regular expression
<regexp> is matched against the vlan names to select the vlans of
interest. <tbd>

.SH INTERACTIVE MONITOR COMMANDS
Several single-key commands are recognized while \fBscli\fP is running
in monitor mode:
.TP 8
.B space
Update the display.
.TP
.B ^L
Redraw the screen.
.TP
.B h or ?
Print a help page.
.TP
.B c
Toggle display of contact summary information.
.TP
.B d
Set the delay in seconds between updates.
.TP
.B m
Toggle display of mode specific summary information.
.TP
.B n
Toggle display of network layer summary information.
.TP
.B q
Quit the monitoring mode.
.TP
.B x
Exit scli immediately.
.TP
.B t
Toggle display of transport layer summary information.
.TP
.B w
Freeze the screen until someone hits a key.
.TP
.B >
Select next mode in the list of display modes.
.TP
.B <
Select previous mode in the list of display modes.
.SH UNITS
\fBscli\fP displays numbers in a compact format. It uses several
abbreviations to explain the units of the numbers. Here are some
explanations:
.TP
.B bps
Bits per second.
.TP
.B pps
Packets per second.
.TP
.B sps
Segments per second.
.PP
Large numbers are usually displayed with a scaling factor (k=10^3,
m=10^6, g=10^9, t=10^12, p=10^15, K=2^10, M=2^20, G=2^30, T=2^40m,
P=2^50).
.SH ALIASES
Long command names can be abbreviated by using aliases. The \fBscli\fP
interpreter maintains a list of aliases. Every command is first checked
whether the first word matches an alias. If the first word matches an
alias, then the first word will be replaced by the value of the alias.
Alias expansion only happens once.
.P
Aliases are not expanded when the \fBscli\fP interpreter is running
in non-interactive mode.
.SH REGULAR EXPRESSIONS
\fBscli\fP generally uses POSIX.2 Extended Regular Expressions. The
regular expression matching is case sensitive.
.SH READLINE
\fBscli\fP supports the GNU readline library. The GNU readline library
provides command line editing as well as command completion
capabilities. Please consult the GNU readline documentation for a
detailed description of the readline features.
.SH HISTORY
\fBscli\fP supports the GNU history library. The GNU history library
provides a history expansion feature that is similar to the history
expansion provided by `csh'. Please consult the GNU history library
documentation for a detailed description of the history features.
.SH PAGER
\fBscli\fP respects the PAGER environment variable when running
interactively.  If the PAGER environment variable exists and the
output generated by an scli command does not fit on the terminal, then
the output is written to the standard input of the PAGER.
.SH FILES
.TP
.I ~/.scli_history
The history of scli commands.
.TP
.I ~/.sclirc
The scli startup file.
.TP
.I ~/.inputrc
Individual readline initialization file.
.SH "FURTHER INFORMATION"
More information can be found on the stools web page which is
available at:
.PP
<http://www.ibr.cs.tu-bs.de/projects/stools/>
.SH "SEE ALSO"
.BR regex(7)
.SH AUTHOR
Juergen Schoenwaelder <schoenw@ibr.cs.tu-bs.de>.
